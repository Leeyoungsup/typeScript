"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _apolloServerMicro=require("apollo-server-micro"),_graphqlTools=require("graphql-tools"),_mongodb=require("mongodb");function _templateObject(){var e=_taggedTemplateLiteral(["\n  type User {\n    id: ID!\n    firstName: String!\n    lastName: String!\n    blog: String\n    stars: Int\n  }\n\n  type Query {\n    users: [User]!\n  }\n"]);return _templateObject=function(){return e},e}function _taggedTemplateLiteral(e,r){return r=r||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}require("dotenv").config();var db,typeDefs=(0,_apolloServerMicro.gql)(_templateObject()),resolvers={Query:{users:function(e,r,n){return n.db.collection("users").findOne().then(function(e){return e.users})}}},schema=(0,_graphqlTools.makeExecutableSchema)({typeDefs:typeDefs,resolvers:resolvers}),apolloServer=new _apolloServerMicro.ApolloServer({schema:schema,context:function(){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(db){e.next=12;break}if(e.prev=1,(r=new _mongodb.MongoClient(process.env.MONGO_DB_URI,{useNewUrlParser:!0,useUnifiedTopology:!0})).isConnected()){e.next=6;break}return e.next=6,regeneratorRuntime.awrap(r.connect());case 6:db=r.db("next-graphql"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("---\x3eerror while connecting via graphql context (db)",e.t0);case 12:return e.abrupt("return",{db:db});case 13:case"end":return e.stop()}},null,null,[[1,9]])}}),config={api:{bodyParser:!1}};exports.config=config;
//# sourceMappingURL=graphql.min.js.map
